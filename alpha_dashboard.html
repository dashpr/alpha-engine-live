<!DOCTYPE html>
</div>


<div class="card">
<h2>Watchlist History</h2>
<table id="watchTable"></table>
</div>


<script>
async function loadJSON(path){
const r = await fetch(path + "?t=" + Date.now());
return await r.json();
}


async function loadCSV(path){
const r = await fetch(path + "?t=" + Date.now());
return await r.text();
}


async function init(){
const last = await loadJSON("output/last_rebalance.json");
const next = await loadJSON("output/next_rebalance.json");
const upd = await loadJSON("output/last_updated.json");
const ai = await loadJSON("output/ai_summary.json");
const head = await loadJSON("output/headlines.json");
const csv = await loadCSV("output/watchlist_history.csv");


document.getElementById("lastRebalance").innerText = last.date;
document.getElementById("nextRebalance").innerText = next.date;
document.getElementById("lastUpdated").innerText = upd.timestamp;
document.getElementById("aiSummary").innerText = ai.summary;


const ul = document.getElementById("headlines");
ul.innerHTML = "";
head.forEach(h => {
const li = document.createElement("li");
li.textContent = h;
ul.appendChild(li);
});


const table = document.getElementById("watchTable");
table.innerHTML = "";


const rows = csv.trim().split("
");
rows.forEach((row, i) => {
const tr = document.createElement("tr");
row.split(",").forEach(col => {
const cell = document.createElement(i === 0 ? "th" : "td");
cell.textContent = col.trim();
tr.appendChild(cell);
});
table.appendChild(tr);
});
}


init();
</script>


</body>
</html>
