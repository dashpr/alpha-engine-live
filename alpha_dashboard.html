<!DOCTYPE html>
<h2>AI Market Summary</h2>
<p id="aiSummary">Loading...</p>
</div>


<div class="card">
<h2>Headlines</h2>
<ul id="headlines"></ul>
</div>


<div class="card">
<h2>Watchlist History</h2>
<table id="watchTable"></table>
</div>


<script>
async function loadJSON(path){
const r = await fetch(path + "?t=" + Date.now());
return await r.json();
}


async function bindMeta(){
const last = await loadJSON("output/last_rebalance.json");
const next = await loadJSON("output/next_rebalance.json");
const upd = await loadJSON("output/last_updated.json");


document.getElementById("lastRebalance").innerText = last.date;
document.getElementById("nextRebalance").innerText = next.date;
document.getElementById("lastUpdated").innerText = upd.timestamp;
}


async function bindAI(){
const ai = await loadJSON("output/ai_summary.json");
document.getElementById("aiSummary").innerText = ai.summary;


const h = await loadJSON("output/headlines.json");
const ul = document.getElementById("headlines");
ul.innerHTML = "";
h.forEach(x => {
const li = document.createElement("li");
li.textContent = x;
ul.appendChild(li);
});
}


async function bindWatchlist(){
const res = await fetch("output/watchlist_history.csv?t=" + Date.now());
const text = await res.text();
const rows = text.trim().split("\n").map(r => r.split(","));


const table = document.getElementById("watchTable");
table.innerHTML = "";


rows.forEach((row,i)=>{
const tr = document.createElement("tr");
row.forEach(cell=>{
const el = document.createElement(i===0?"th":"td");
el.textContent = cell;
tr.appendChild(el);
});
table.appendChild(tr);
});
}


bindMeta();
bindAI();
bindWatchlist();
</script>


</body>
</html>
