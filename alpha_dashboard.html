<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>AI Alpha Engine — Investor Dashboard</title>
<style>
body{background:#071a26;color:#e6f1f7;font-family:Arial;margin:0;padding:20px}
.card{background:#0f2a38;border-radius:16px;padding:20px;margin-bottom:20px}
h1{margin-top:0}
table{width:100%;border-collapse:collapse}
td,th{padding:8px;border-bottom:1px solid #1f3b4a}
</style>
</head>

<body>

<h1>AI Alpha Engine — Investor Dashboard</h1>

<div class="card"><h2 id="nav">Loading NAV...</h2></div>

<div class="card">
<h3>Portfolio Snapshot</h3>
<table id="snapshot"></table>
</div>

<div class="card">
<h3>Portfolio Positions</h3>
<table id="positions"></table>
</div>

<div class="card">
<h3>Sector Allocation</h3>
<pre id="sectors">Loading...</pre>
</div>

<div class="card">
<h3>Risk Metrics</h3>
<pre id="risk">Loading...</pre>
</div>

<div class="card">
<h3>AI Commentary</h3>
<p id="ai">Loading...</p>
</div>

<script>
async function j(p){
  const r=await fetch(p+"?t="+Date.now());
  return r.json();
}

async function init(){

  const [nav,pos,hold,sec,risk,ai] = await Promise.all([
    j("phase2/nav.json"),
    j("phase2/positions.json"),
    j("phase2/holdings.json"),
    j("phase2/sectors.json"),
    j("phase2/risk.json"),
    j("phase2/ai.json")
  ]);

  document.getElementById("nav").innerText =
    `NAV ₹${nav.value.toLocaleString()} (${nav.return_pct}%)`;

  document.getElementById("ai").innerText = ai.text;

  // snapshot
  document.getElementById("snapshot").innerHTML =
    "<tr><th>Symbol</th><th>Weight</th></tr>" +
    hold.map(h=>`<tr><td>${h.symbol}</td><td>${h.weight}%</td></tr>`).join("");

  // positions
  document.getElementById("positions").innerHTML =
    "<tr><th>Symbol</th><th>Qty</th><th>Avg</th><th>Price</th><th>MTM</th></tr>" +
    pos.map(p=>`<tr><td>${p.symbol}</td><td>${p.qty}</td><td>${p.avg_cost}</td><td>${p.price}</td><td>${p.mtm}</td></tr>`).join("");

  document.getElementById("sectors").innerText =
    JSON.stringify(sec,null,2);

  document.getElementById("risk").innerText =
    JSON.stringify(risk,null,2);
}

init();
</script>

</body>
</html>
