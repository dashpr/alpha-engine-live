<!DOCTYPE html>
</div>

<div class="card">
<h2>Live Prices</h2>
<table id="prices"></table>
</div>

<div class="card">
<h2>AI Portfolio Brief</h2>
<pre id="ai"></pre>
</div>

<div class="card">
<h2>Event Highlights</h2>
<ul id="events"></ul>
</div>

<script>
const BASE = "output/";

async function loadJSON(name){
  const r = await fetch(BASE + name + "?t=" + Date.now());
  return await r.json();
}

async function loadText(name){
  const r = await fetch(BASE + name + "?t=" + Date.now());
  return await r.text();
}

async function init(){
  try{
    const nav = await loadJSON("portfolio_nav.json");
    document.getElementById("capital").innerText = nav.capital;
    document.getElementById("value").innerText = nav.value;
    document.getElementById("return").innerText = nav.return_pct;

    const prices = await loadJSON("prices_live.json");
    let html = "<tr><th>Symbol</th><th>Price</th><th>%</th></tr>";
    for (const s in prices){
      const c = prices[s].change_pct ?? 0;
      const cls = c >= 0 ? "green" : "red";
      html += `<tr><td>${s}</td><td>${prices[s].price}</td><td class="${cls}">${c.toFixed(2)}</td></tr>`;
    }
    document.getElementById("prices").innerHTML = html;

    const ai = await loadText("ai_brief.txt");
    document.getElementById("ai").innerText = ai;

    const ev = await loadJSON("event_feed.json");
    document.getElementById("events").innerHTML = ev.highlights.map(x => `<li>${x}</li>`).join("");

  } catch(e){ console.error(e); }
}

init();
</script>

</body>
</html>
